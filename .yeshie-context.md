# Yeshie Project Context

## Project Overview
Yeshie is a browser extension that enables natural language interaction with LLMs through a collaboration interface. The core functionality includes:

1. Learning Mode: Ability to learn how to interact with different LLM interfaces
2. Pro Mode: Using an open LLM tab instead of direct API calls
3. Browser Automation: Using Stepper functions to control browser actions

## Current Implementation Status
- Phase 1: LLM Learning Implementation is in progress
- Currently working on Step 1: Command Parser Implementation
- Initial focus on ChatGPT integration

## Key Components

### Stepper Functionality
Documented in `stepper-documentation.md`, includes:
- Navigation commands
- Element interaction
- Page state monitoring
- Advanced operations

### Project Plan
Documented in `project-plan.md`, current focus:
1. Command parser for "Learn" commands
2. Toast notification system
3. Stepper integration
4. Selector discovery
5. Pattern storage and validation

## Technical Context
- Browser extension using Plasmo framework
- TypeScript implementation
- Chrome extension APIs
- Stepper for browser automation

## Development Workflow
1. Make code changes
2. Extension rebuilds automatically
3. Reload extension in Chrome to apply changes
4. Test with automatic command execution
5. Capture debugging output to clipboard
6. Verify pattern storage and retrieval
7. Test error recovery mechanisms

## Recent Learnings
1. Message Handling:
   - Proper async response handling is critical
   - Message channels must be managed carefully
   - Timeouts should be implemented for message sending

2. Debugging:
   - Console logs should be captured for debugging
   - Clipboard can be used for diagnostic output
   - Type declarations are essential for TypeScript modules

3. Permissions:
   - Clipboard access requires explicit permission
   - Tab management needs proper permissions
   - Cross-origin restrictions must be considered

4. TypeScript:
   - Type declarations needed for custom modules
   - Proper module resolution configuration
   - Interface definitions for message passing

## Next Steps
1. Fix input focus issues on various sites
2. Implement command history
3. Add command execution feedback
4. Add toast notifications for user guidance
5. Implement error recovery mechanisms
6. Test with different LLM sites
7. Document new patterns or selectors discovered

## Current Focus
- Debugging message handling issues
- Ensuring proper permissions
- Implementing reliable console logging
- Fixing TypeScript configuration
- Preventing Chrome locking during operation

## Important Files
- `extension/components/YeshieEditor.tsx` - Main editor component
- `extension/background.ts` - Background script for coordination
- `extension/functions/CommandParser.ts` - Command parsing logic
- `extension/functions/clipboard.ts` - Clipboard utilities
- `extension/functions/Stepper.ts` - Step execution logic

## Design Decisions
- Using toast notifications for user guidance
- Clipboard-based debugging output
- Initial ChatGPT pattern will be hardcoded
- Automatic test command execution after reload

## Current Challenges
- Console error sharing
- LLM interface pattern discovery
- User interaction recording
- Error recovery mechanisms

## Project Status
- Extension is loaded and ready for development
- Built-in editor is functional
- Iframe editor is temporarily disabled
- Recent implementation attempts revealed several issues:
  - Chrome locking during message handling
  - Clipboard permission requirements
  - Type declaration needs
  - Async message handling challenges

## Implementation Details
- Using Plasmo framework for Chrome extension development
- React-based UI components
- TypeScript for type safety
- Chrome extension APIs for browser integration
- Background script for state management
- Content scripts for page interaction

## Current Focus
- Debugging message handling issues
- Ensuring proper permissions
- Implementing reliable console logging
- Fixing TypeScript configuration
- Preventing Chrome locking during operation

## Known Issues
1. Chrome locking during message handling
2. Missing clipboard permissions
3. Type declaration errors
4. Async message handling problems
5. Console logging not properly captured 